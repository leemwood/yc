# --------------------------------
# Geyser 配置文件
# 
# 连接 Minecraft: 基岩版 和 Minecraft: Java版 的桥梁。
# 
# GitHub: https://github.com/GeyserMC/Geyser
# Discord: https://discord.gg/geysermc
# Wiki: https://wiki.geysermc.org/
# 
# 注意: 请参阅 https://wiki.geysermc.org/geyser/setup/ 获取设置指南。许多视频教程已过时。
# 在大多数情况下，特别是使用服务器托管提供商时，需要进一步的特定主机配置。
# --------------------------------

bedrock:
    # 监听连接的IP地址。
    # 通常，只有当您想要限制哪些IP可以连接到您的服务器时，才应该取消注释并更改此项。
    # address: 0.0.0.0
    # 监听连接的端口
    port: 19132

    # 某些托管服务每次启动服务器时都会更改您的Java端口，并要求基岩版使用相同的端口。
    # 此选项使基岩版端口在每次启动服务器时与Java端口相同。
    # 此选项仅适用于插件版本。
    clone-remote-port: false

    # 将向 Minecraft: 基岩版客户端广播的MOTD。如果"passthrough-motd"设置为true，则此项无关紧要
    # 如果其中任何一个为空，相应的字符串将默认为"Geyser"
    motd1: "Geyser"
    motd2: "Another Geyser server."

    # 将发送给 Minecraft: 基岩版客户端的服务器名称。这在暂停菜单和设置菜单中都可见。
    server-name: "Geyser"

    # 对基岩版客户端的网络流量进行多少压缩。数字越高，CPU使用率越高，但
    # 带宽使用越少。在-1以下或9以上没有任何效果。设置为-1以禁用。
    compression-level: 6

    # 向基岩版客户端广播MOTD时使用的端口，告诉他们应该使用哪个端口连接到服务器。
    # 除非Geyser运行在与用于连接的端口不同的内部端口上，否则不要取消注释并更改此项。
    # broadcast-port: 19132
    # 是否为客户端启用PROXY协议。除非您在Geyser实例前运行UDP反向代理，
    # 否则您不需要此功能。
    enable-proxy-protocol: false

# 允许的PROXY协议代理IP地址/子网列表。仅在启用"enable-proxy-protocol"时有效，
# 实际上只应在无法使用适当防火墙时使用（通常在共享托管提供商等情况下为真）。
# 保持此列表为空意味着没有IP地址白名单。
# 支持IP地址、子网和纯文本文件链接。
# proxy-protocol-whitelisted-ips: [ "127.0.0.1", "172.18.0.0/16", "https://example.com/whitelist.txt" ]
remote:
    # 远程（Java版）服务器的IP地址
    # 如果设置为"auto"，对于独立版本，远程地址将设置为127.0.0.1，
    # 对于插件版本，建议保持为"auto"，这样Geyser将自动配置地址、端口和认证类型。
    # 如果安装了floodgate，请保持为"auto"。
    address: auto

    # 远程（Java版）服务器的端口
    # 对于插件版本，如果地址已设置为"auto"，端口也将跟随服务器的监听端口。
    port: 25565

    # 认证类型。可以是offline、online或floodgate（参见 https://github.com/GeyserMC/Geyser/wiki/Floodgate）。
    # 对于插件版本，建议将`address`字段保持为"auto"，以便自动配置Floodgate支持。
    # 如果安装了Floodgate并且`address:`设置为"auto"，则将自动使用"auth-type: floodgate"。
    auth-type: floodgate

    # 连接到服务器时是否启用PROXY协议。
    # 这仅在以下情况下有用：
    # 1) 您的服务器支持PROXY协议（可能不支持）
    # 2) 您运行Velocity或BungeeCord并在代理的主配置中启用了该选项。
    # 如果您不知道这是什么，请不要触碰它！
    use-proxy-protocol: false

    # 将基岩版客户端用于连接的主机名转发到Java服务器
    # 这是为代理上的强制主机设计的
    forward-hostname: false

# Floodgate使用加密来确保来自授权来源的使用。
# 这应该指向由Floodgate生成的公钥（BungeeCord、Spigot或Velocity）
# 不使用Floodgate时可以忽略此项。
# 如果您在同一服务器上使用Floodgate的插件版本，密钥将自动从Floodgate中获取。
floodgate-key-file: key.pem

# 仅适用于在线模式认证类型。
# 存储应在登录后保存其Java版账户的基岩版玩家列表。
# 这会保存一个令牌，可以重复使用来稍后认证玩家。这不会保存电子邮件或密码，
# 但在添加到此列表和给他人访问此Geyser实例文件时仍应谨慎。
# 从此列表中删除名称将在下次Geyser启动时删除其缓存的登录信息。
# 令牌将保存在与此配置相同的文件夹中，名为"saved-refresh-tokens.json"的文件中。
saved-user-logins:
    - ThisExampleUsernameShouldBeLongEnoughToNeverBeAnXboxUsername
    - ThisOtherExampleUsernameShouldAlsoBeLongEnough

# 指定用户授权Geyser访问其Microsoft账户时等待多少秒。
# 在此期间允许用户从服务器断开连接。
pending-authentication-timeout: 120

# 如果给出大量命令，基岩版客户端在首次打开命令提示符时可能会冻结。
# 禁用此选项将阻止发送命令建议并解决基岩版客户端的冻结问题。
command-suggestions: true

# 以下三个选项启用"ping透传" - MOTD、玩家数量和/或协议名称从Java服务器获取。
# 将远程服务器的MOTD转发给基岩版玩家。
passthrough-motd: true

# 将远程服务器的玩家数量和最大玩家数转发给基岩版玩家。
passthrough-player-counts: true

# 启用传统ping透传。除非您的MOTD或玩家数量显示不正确，否则无需启用此选项。
# 此选项在独立版本上不起作用。
legacy-ping-passthrough: true

# 多久ping一次远程服务器，以秒为单位。仅与独立版本或传统ping透传相关。
# 如果您遇到BrokenPipe错误，请增加此值。
ping-passthrough-interval: 3

# Whether to forward player ping to the server. While enabling this will allow Bedrock players to have more accurate
# ping, it may also cause players to time out more easily.
forward-player-ping: true

# 可以连接的最大玩家数量。目前这只是视觉效果，实际上不会限制玩家数量。
max-players: 100

# 是否应通过控制台发送调试消息
debug-mode: false

# 允许发送虚假的冷却指示器。基岩版玩家否则看不到冷却时间，因为他们仍使用1.8战斗系统。
# 请注意：如果启用冷却时间，某些用户可能在冷却序列期间看到黑框，如下所示：
# https://cdn.discordapp.com/attachments/613170125696270357/957075682230419466/Screenshot_from_2022-03-25_20-35-08.png
# 可以通过进入基岩版设置中的辅助功能选项卡并将"文本背景不透明度"设置为0来禁用此功能
# 此设置可以设置为"title"、"actionbar"或"false"
show-cooldown: title

# 控制是否向玩家显示坐标。
show-coordinates: true

# 是否阻止基岩版玩家执行脚手架式搭桥。
disable-bedrock-scaffolding: false

# 如果设置，当基岩版玩家执行任何表情时，它将交换副手和主手物品，就像Java版按键绑定一样
# 此选项有三个设置：
# disabled - 默认/回退选项，不应用此解决方案
# no-emotes - 表情不会发送给其他基岩版客户端，但会交换副手。这实际上禁用了所有表情的显示。
# emotes-and-offhand - 表情会发送给基岩版客户端，同时交换副手
emote-offhand-workaround: "disabled"

# 如果我们没有客户端请求的语言，则使用默认语言。取消注释以不使用默认系统语言。
# default-locale: en_us

# 指定图像缓存到磁盘的天数，以节省从互联网下载的时间。
# 值为0表示禁用。（默认：0）
cache-images: 0

# 允许显示自定义头颅。保持启用可能会导致较旧/较弱设备的性能下降。
allow-custom-skulls: true

# 每个玩家显示的最大自定义头颅数量。增加此值可能会降低较弱设备的性能。
# 将此设置为-1将导致显示所有自定义头颅，无论距离或数量如何。
max-visible-custom-skulls: 128

# 玩家周围显示自定义头颅的半径（以方块为单位）。
custom-skull-render-distance: 32

# 是否添加基岩版中通常不存在的任何物品和方块。
# 只有在使用不使用"传输数据包"样式服务器切换的代理时才需要禁用此选项。
# 如果禁用此选项，熔炉矿车物品将映射为漏斗矿车物品。
# Geyser的方块、物品和头颅映射系统也将被禁用。
# 此选项需要重启Geyser才能更改其设置。
add-non-bedrock-items: true

# 基岩版阻止在下界Y127以上建造和显示方块。
# 此配置选项通过将下界维度ID更改为末地ID来解决此问题。
# 主要缺点是整个下界将具有相同的红色雾气，而不是每个生物群系具有不同的雾气。
above-bedrock-nether-building: true

# 如果有资源包，强制客户端加载所有资源包。
# 如果设置为false，即使用户不想下载资源包，也允许用户连接到服务器。
force-resource-packs: true

# 允许解锁Xbox成就。
xbox-achievements-enabled: false

# 是否由服务器记录玩家IP地址。
log-player-ip-addresses: true

# 是否提醒控制台和管理员有新的Geyser版本可用，该版本支持此Geyser版本不支持的基岩版版本。
# 建议保持此选项启用，因为许多基岩版平台会自动更新。
notify-on-new-bedrock-update: true

# 用于标记基岩版玩家物品栏中不可用槽位的物品。例如创造模式下的2x2合成网格，
# 或与常规3x9大小不同的自定义物品栏菜单。屏障方块是默认物品。
unusable-space-block: minecraft:barrier

# bStats是一个完全匿名的统计跟踪器，仅跟踪有关Geyser的基本信息，
# 例如有多少人在线、有多少服务器在使用Geyser、使用的操作系统等。
# 您可以在此处了解更多关于bStats的信息：https://bstats.org/
# https://bstats.org/plugin/server-implementation/GeyserMC
metrics:
    # 是否应启用指标
    enabled: false

    # 服务器UUID，请勿更改！
    uuid: 5f498014-4e99-4232-aeaa-eee32c71cd9a

# 高级选项 - 除非您知道自己在做什么，否则请勿触碰！

# Geyser在每个记分板数据包后更新记分板，但当Geyser尝试处理
# 每秒大量记分板数据包时可能会导致严重延迟。
# 此选项允许您指定每秒多少个记分板数据包后，
# 记分板更新将限制为每秒四次更新。
scoreboard-packet-threshold: 20

# 允许来自ProxyPass和Waterdog的连接。
# 有关帮助，请参见 https://www.spigotmc.org/wiki/firewall-guide/ - 使用UDP而不是TCP。
enable-proxy-connections: false

# 互联网支持最大MTU为1492，但可能导致数据包分片问题。
# 1400是默认值。
mtu: 1492

# 是否直接连接到Java服务器而不创建TCP连接。
# 只有当与数据包或网络接口的插件无法与Geyser正常工作时，才应禁用此选项。
# 如果在插件版本上启用，远程地址和端口部分将被忽略
# 如果在插件版本上禁用，预期性能下降和延迟增加
use-direct-connection: true

# Geyser是否应尝试为基岩版玩家禁用压缩。这应该是有益的，因为当Java数据包不通过网络处理时
# 无需压缩数据。
# 这需要use-direct-connection设置为true。
disable-compression: true


config-version: 4
